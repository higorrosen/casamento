<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Presentes</title>
    <style>
      @font-face {
        font-family: 'Joliet';
        src: url('Joliet-Regular.eot');
        src: local('Joliet Regular'), local('Joliet-Regular'),
            url('fontes/Joliet-Regular.eot?#iefix') format('embedded-opentype'),
            url('fontes/Joliet-Regular.woff2') format('woff2'),
            url('fontes/Joliet-Regular.woff') format('woff'),
            url('fontes/Joliet-Regular.ttf') format('truetype');
        font-weight: normal;
        font-style: normal;
        font-display: swap;
      }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Marcellus', serif;
            background: #fdf8ee;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        h1 {
            text-align: center;
            font-size: 4rem;
            margin-bottom: 30px;
            color: #333;
            font-family: 'Joliet', serif;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
        }

        .card {
            background: rgb(230, 215, 168);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
            cursor: pointer;
            position: relative;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card.unavailable {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .card.unavailable::after {
            content: 'INDISPONÍVEL';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 0, 0, 0.9);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: bold;
            z-index: 2;
        }

        .card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .card-content {
            padding: 15px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .card h2 {
            font-size: 1.2rem;
            margin: 0 0 10px;
            color: #444;
            text-align: center;
        }

        .quantity-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #2e7d32;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .quantity-badge.low {
            background: #ff9800;
        }

        .quantity-badge.out {
            background: #f44336;
        }

        .buy-btn {
            display: block;
            text-align: center;
            background: #333;
            color: white;
            text-decoration: none;
            padding: 10px;
            border-radius: 8px;
            font-weight: bold;
            transition: background 0.3s;
            border: none;
            cursor: pointer;
        }

        .buy-btn:hover {
            background: #555;
        }

        .buy-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 90%;
            overflow-y: auto;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: black;
        }

        .produto-container {
            display: flex;
            justify-content: space-between;
            gap: 40px;
            align-items: flex-start;
        }

        .produto-info {
            flex: 1;
        }

        .produto-info img {
            max-width: 100%;
            border-radius: 10px;
        }

        .produto-info h1 {
            margin-top: 20px;
            font-size: 28px;
        }

        .produto-info p {
            margin-top: 10px;
            line-height: 1.6;
            color: #444;
        }

        .compra-opcoes {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 15px;
        }

        .compra-opcoes h2 {
            margin-bottom: 10px;
        }

        .btn {
            display: flex;
            align-items: center;
            gap: 12px;
            background: #eee;
            padding: 14px 20px;
            border-radius: 8px;
            text-decoration: none;
            color: #333;
            font-size: 18px;
            font-weight: bold;
            overflow: hidden;
            position: relative;
            transition: all 0.4s ease;
            border: none;
            cursor: pointer;
        }

        .btn img {
            width: 28px;
            height: auto;
            transition: transform 0.4s ease;
        }

        .btn span {
            transition: transform 0.4s ease, opacity 0.4s ease;
        }

        .btn:hover img {
            transform: translateX(150px);
        }

        .btn:hover span {
            transform: translateX(-50px);
            opacity: 0;
        }

        .amazon { background: #FF9900; color: white; }
        .mercado-livre { background: #FFF159; color: #333; }
        .americanas { background: #E31837; color: white; }
        .magalu { background: #0078FF; color: white; }
        .pix-btn { background: #32BCAD; color: white; }

        .contribution-form {
            margin-top: 20px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        .qr-code {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 8px;
        }

        .submit-btn {
            background: #2e7d32;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }

        .submit-btn:hover {
            background: #1b5e20;
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .lua-de-mel {
            text-align: center;
            margin: 40px 0 20px;
            padding: 20px;
            color: rgb(0, 0, 0);
            border-radius: 12px;
        }

        .voltar {
            text-align: center;
            margin-top: 40px;
        }

        .voltar button {
            background: none;
            border: 2px solid #333;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .voltar button:hover {
            background: #333;
            color: white;
        }

        @media (max-width: 768px) {
            .produto-container {
                flex-direction: column;
                gap: 20px;
            }
        }


        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .success-message {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .error-message {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
    </style>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>Lista de Presentes</h1>

        <div class="grid" id="productGrid">
            <!-- Os produtos serão gerados dinamicamente pelo JavaScript -->
        </div>

        <div class="lua-de-mel">
            <h2>Contribua com nossa Lua de Mel</h2>
            <p>Sua contribuição nos ajudará a criar memórias inesquecíveis!</p>
        </div>

        <div class="voltar">
            <button onclick="window.location.href='../home/index.html'">⬅ Voltar para o site</button>
        </div>
    </div>

    <!-- Modal do Produto -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div class="produto-container">
                <div class="produto-info">
                    <img id="modalImage" src="" alt="">
                    <h1 id="modalTitle"></h1>
                    <p id="modalDescription"></p>
                    <div class="quantity-info">
                        <p><strong>Quantidade disponível: <span id="modalQuantity"></span></strong></p>
                    </div>
                </div>
                
                <div class="compra-opcoes">
                    <h2>Compre agora:</h2>
                    <a href="https://www.amazon.com.br" target="_blank" class="btn amazon">
                        <img src="https://images.icon-icons.com/1195/PNG/512/1490889698-amazon_82521.png" alt="Amazon"> 
                        <span>Amazon</span>
                    </a>
                    <a href="https://www.mercadolivre.com.br" target="_blank" class="btn mercado-livre">
                        <img src="https://vectorseek.com/wp-content/uploads/2023/08/Mercado-Livre-Icon-Logo-Vector.svg-.png" alt="Mercado Livre"> 
                        <span>Mercado Livre</span>
                    </a>
                    <a href="https://www.americanas.com.br" target="_blank" class="btn americanas">
                        <img src="https://iili.io/KfVKxQS.png" alt="Americanas"> 
                        <span>Americanas</span>
                    </a>
                    <a href="https://www.magazineluiza.com.br" target="_blank" class="btn magalu">
                        <img src="https://play-lh.googleusercontent.com/vV6hkCdd63CHWubLkPLCvRAFE6aWGjhPB004I32poU-vzz1LIjXE1_rMOWaci_MiKA" alt="Magalu"> 
                        <span>Magalu</span>
                    </a>
                    
                    <button class="btn pix-btn" onclick="showContributionForm()">
                        <img src="https://artpoin.com/wp-content/uploads/2023/09/artpoin-logo-pix.png" alt="PIX"> 
                        <span>Quero contribuir com o valor</span>
                    </button>
                    
                    <button class="btn submit-btn" id="giftButton" onclick="showGiftForm()">
                      Darei esse presente!
                    </button>
                </div>
            </div>

            <!-- Formulário de Contribuição PIX -->
            <div id="contributionForm" class="contribution-form" style="display: none;">
                <h3>Contribuir via PIX</h3>
                <div class="qr-code">
                    <div style="width: 200px; height: 200px; background: #f0f0f0; margin: 0 auto; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                        <p>QR Code PIX<br><small>Sua chave PIX aqui</small></p>
                    </div>
                    <p><strong>Chave PIX:</strong> higor.cabral95@gmail.com</p>
                </div>
                <button onclick="hideContributionForm()" class="btn">Voltar</button>
            </div>

            <!-- Formulário de Doação -->
            <div id="giftForm" class="contribution-form" style="display: none;">
                <h3>Confirmar Presente</h3>
                <div id="messageContainer"></div>
                <form 
  id="giftSubmissionForm"
  action="https://formspree.io/f/mkgvpjoa"
  method="POST"
  enctype="multipart/form-data"
>
  <div class="form-group">
    <label for="giftQuantity">Quantas unidades você vai dar?</label>
    <select id="giftQuantity" name="quantity" required>
      <option value="">Selecione...</option>
      <option value="1">1 unidade</option>
      <option value="2">2 unidades</option>
    </select>
  </div>
  
  <div class="form-group">
    <label for="giftName">Seu nome completo:</label>
    <input type="text" id="giftName" name="name" required>
  </div>
  
  <div class="form-group">
    <label for="giftEmail">Seu e-mail:</label>
    <input type="email" id="giftEmail" name="email" required>
  </div>
  
  <button type="submit" class="submit-btn">Confirmar Presente</button>
</form>
            </div>
        </div>
    </div>

    <script>
        console.log('Iniciando script...');
        emailjs.init('WbCcaEHTn-Pu-z287');
        
        // Base de dados dos produtos
const products = [
    // ======================
    // 1. Eletrodomésticos de Cozinha
    // ======================
    {
        id: 1,
        name: "Air Fryer",
        image: "https://m.media-amazon.com/images/I/51wwp25UBVL._UF894,1000_QL80_.jpg",
        description: "Vai nos ajudar a preparar refeições práticas e saudáveis, com menos óleo e muito sabor.",
        quantity: 1,
        maxQuantity: 1
    },
    {
        id: 2,
        name: "Liquidificador",
        image: "https://m.media-amazon.com/images/I/51N3Xi4JJML._UF894,1000_QL80_.jpg",
        description: "Perfeito para fazer os sucos e molhos da Carol.",
        quantity: 1,
        maxQuantity: 1
    },
    {
        id: 3,
        name: "Sanduicheira",
        image: "https://gazin-images.gazin.com.br/rpfwKyI7tHUcHkGfUrDsDLvFepc=/1920x/filters:format(webp):quality(75)/https://gazin-marketplace.s3.amazonaws.com/midias/imagens/2022/04/grill-sanduicheira-britania-press-antiaderente-chapa-ondulada-e-lisa-850w-082204572553.jpg",
        description: "Ideal para nossos lanches rápidos e tardes preguiçosas juntos.",
        quantity: 1,
        maxQuantity: 1
    },
    {
        id: 4,
        name: "Cafeteira",
        image: "https://jcsbrasil.vteximg.com.br/arquivos/ids/215788-1000-1000/BVSTEM7200-0.jpg?v=638235754368870000",
        description: "Porque um bom café faz parte da nossa rotina e dos nossos momentos de aconchego.",
        quantity: 1,
        maxQuantity: 1
    },
    {
        id: 5,
        name: "Batedeira",
        image: "https://jcsbrasil.vteximg.com.br/arquivos/ids/208955-1000-1000/1---OBAT640.3.jpg?v=638132085204570000",
        description: "Para adoçar nossos dias com bolos, pães e sobremesas deliciosos preparados pelas lindas mãos da noiva.",
        quantity: 1,
        maxQuantity: 1
    },
    {
        id: 6,
        name: "Mixer",
        image: "https://jcsbrasil.vteximg.com.br/arquivos/ids/227395-1000-1000/Sem-Titulo-2.jpg?v=638737526556530000",
        description: "Nos ajudará a preparar sopas, molhos e receitas com praticidade.",
        quantity: 1,
        maxQuantity: 1
    },
    {
        id: 7,
        name: "Moedor de Café",
        image: "https://m.media-amazon.com/images/I/51B8iM+CyFL._UF894,1000_QL80_.jpg",
        description: "Nada melhor que sentir o cheirinho do café fresco moído na hora.",
        quantity: 1,
        maxQuantity: 1
    },

    // ======================
    // 2. Utensílios de Cozinha
    // ======================
    {
        id: 8,
        name: "Jogo de Panelas de Indução Antiaderentes",
        image: "https://blog.havan.com.br/wp-content/uploads/2023/08/Destaque-Post-Thumbnail-2-Panela-para-fogao-de-inducao.jpg",
        description: "Serão nossas companheiras para cozinhar juntos e preparar jantares especiais.",
        quantity: 1,
        maxQuantity: 1
    },
    {
        id: 9,
        name: "Conjunto de Formas",
        image: "https://m.media-amazon.com/images/I/51DcgYr-5UL._UF894,1000_QL80_.jpg",
        description: "Para assar os bolos, tortas e cookies da Carol, que vão encher nossa casa de cheiro gostoso.",
        quantity: 2,
        maxQuantity: 2
    },
    {
        id: 10,
        name: "Jogo de Copos",
        image: "https://precolandia.vtexassets.com/arquivos/ids/247572-800-450?v=638551794853970000&width=800&height=450&aspect=true",
        description: "Copos que vão acompanhar desde o café da manhã até os encontros com amigos.",
        quantity: 4,
        maxQuantity: 4
    },
    {
        id: 11,
        name: "Jogo de Taças",
        image: "https://casafreitas2.vteximg.com.br/arquivos/ids/271175-1000-1000/6935003100001-jogo-tacas-diamond-300ml-vidro-transparente-dcasa-2.jpg?v=638779151744200000",
        description: "Para brindar nossas conquistas e momentos especiais.",
        quantity: 2,
        maxQuantity: 2
    },
    {
        id: 12,
        name: "Jogo de Xícaras",
        image: "https://casaferrari.cdn.magazord.com.br/img/2025/04/produto/57675/ryo-maresia-5.png?ims=fit-in/600x600/filters:fill(white)",
        description: "Xícaras para compartilhar cafés da manhã demorados e conversas longas.",
        quantity: 2,
        maxQuantity: 2
    },
    {
        id: 13,
        name: "Jogo de Pratos",
        image: "https://openbox.vtexassets.com/arquivos/ids/182687-976-976/roma-branco-ambientada.jpg?v=637758843412500000",
        description: "Estarão presentes em nossas refeições diárias e jantares de família.",
        quantity: 3,
        maxQuantity: 3
    },
    {
        id: 14,
        name: "Jogo de Talheres",
        image: "https://http2.mlstatic.com/D_NQ_NP_635223-MLA84841207829_052025-O.webp",
        description: "Talheres que vão acompanhar todas as nossas refeições juntos.",
        quantity: 2,
        maxQuantity: 2
    },
    {
        id: 15,
        name: "Filtro de Água",
        image: "https://m.media-amazon.com/images/I/51lj014yH6L._UF894,1000_QL80_.jpg",
        description: "Para garantir água limpa e saudável.",
        quantity: 1,
        maxQuantity: 1
    },

    // ======================
    // 3. Cama, Mesa e Banho
    // ======================
    {
        id: 16,
        name: "Conjunto de lençóis",
        image: "https://pontaodasfabricas.cdn.magazord.com.br/img/2024/05/produto/163/jogo-lencol-jolitex-toque-de-seda-liso-4.jpeg?ims=600x600",
        description: "Para noites confortáveis e cheias de aconchego ao nosso lado.",
        quantity: 5,
        maxQuantity: 5
    },
    {
        id: 17,
        name: "Edredom",
        image: "https://images.tcdn.com.br/img/img_prod/842194/edredom_dupla_face_percal_400_fios_extra_macio_luxo_909_variacao_9303_1_b7a14a0b4371a6fb9e9a8816258e2781.png",
        description: "Vai nos aquecer nas noites frias de Curitiba e deixar o quarto ainda mais acolhedor.",
        quantity: 3,
        maxQuantity: 3
    },
    {
        id: 18,
        name: "Jogo de toalhas de banho",
        image: "https://centraltoalhas.cdn.magazord.com.br/img/2022/06/produto/4373/banho-hotel-prata.jpg?ims=800x800",
        description: "Toalhas para o noivo sempre estender depois de usar.",
        quantity: 5,
        maxQuantity: 5
    },

    // ======================
    // 4. Móveis e Decoração
    // ======================
    {
        id: 19,
        name: "Tapete",
        image: "https://a-static.mlcdn.com.br/800x560/tapete-de-sala-apartamento-300x200-pelo-macio-felpudo-grande-copa-decoracao-mesa-de-jantar-barato-soft-dream/megaatual/t300x200mm/042ec695ff4c15398542af26c9b8a7d5.jpeg",
        description: "Vai trazer conforto e deixar nossa sala mais aconchegante.",
        quantity: 2,
        maxQuantity: 2
    },
    {
        id: 20,
        name: "Cortinas",
        image: "https://www.galaxcommerce.com.br/sistema/upload/297/produtos/persiana-vertical-natural---medida-180-x-180---com-bando_2018-03-26_16-39-18_7.jpg",
        description: "Para dar privacidade e deixar os ambientes ainda mais acolhedores.",
        quantity: 3,
        maxQuantity: 3
    },
    {
        id: 21,
        name: "Itens de Banheiro",
        image: "https://acdn-us.mitiendanube.com/stores/001/995/484/products/kit-harmony-cinza-2a972ca7185acf3e2317417964415424-1024-1024.png",
        description: "Pequenos detalhes que vão deixar o banheiro mais bonito e prático.",
        quantity: 2,
        maxQuantity: 2
    },

    // ======================
    // 5. Climatização e Conforto
    // ======================
    {
        id: 22,
        name: "Climatizador",
        image: "https://www.oster.com.br/arquivos/OCLI100-02M.jpg?v=637695704778630000",
        description: "Vai refrescar nossos dias quentes.",
        quantity: 1,
        maxQuantity: 1
    },
    {
        id: 23,
        name: "Aquecedor",
        image: "https://lojaskubbo.vteximg.com.br/arquivos/ids/158523-1000-1000/imaged9.jpg?v=637645474582670000",
        description: "Curitiba, né?",
        quantity: 1,
        maxQuantity: 1
    },
    {
        id: 24,
        name: "Toalheiro Térmico",
        image: "https://http2.mlstatic.com/D_NQ_NP_922189-MLB87918689935_072025-O-toalheiro-termico-aluminio-de-temperatura-timer-digital.webp",
        description: "Um mimo que vai deixar as toalhas sempre quentinhas.",
        quantity: 1,
        maxQuantity: 1
    },

    // ======================
    // 6. Tecnologia e Automação
    // ======================
    {
        id: 25,
        name: "Smart Speaker",
        image: "https://images.kabum.com.br/produtos/fotos/sync_mirakl/502523/xlarge/Echo-Pop-Amazon-Com-Alexa-Bluetooth-Wi-fi-Smart-Speaker-Preto-C2h4r9-_1753471792.webp",
        description: "Além da música, vai nos ajudar com automação e tornar nossa rotina mais prática.",
        quantity: 1,
        maxQuantity: 1
    },
    {
        id: 26,
        name: "Interruptores Inteligentes",
        image: "https://intelbras.vtexassets.com/arquivos/ids/168302-800-auto?v=638180311716530000&width=800&height=auto&aspect=true",
        description: "Para deixar nossa casa mais moderna e automatizada.",
        quantity: 3,
        maxQuantity: 3
    },

    // ======================
    // 7. Limpeza e Manutenção
    // ======================
    {
        id: 27,
        name: "Aspirador de pó",
        image: "https://freitasvarejo.vteximg.com.br/arquivos/ids/187115-1000-1000/75113073001_4.jpg?v=638439706770970000",
        description: "Vai facilitar muito a limpeza da casa no dia a dia.",
        quantity: 1,
        maxQuantity: 1
    },
    {
        id: 28,
        name: "Ferro Elétrico",
        image: "https://www.havan.com.br/media/catalog/product/cache/73a52df140c4d19dbec2b6c485ea6a50/f/e/ferro-de-passar-a-vapor-e-a-seco-electrolux-efficient-esi11_653582_1.webp",
        description: "Para manter nossas roupas bem cuidadas e prontas para qualquer ocasião.",
        quantity: 1,
        maxQuantity: 1
    },
    {
        id: 29,
        name: "Caixa de Ferramentas",
        image: "https://www.dutramaquinas.com.br/shared/img/produto/alta/432189_jogo_de_ferramentas_106_pecas_com_maleta_max.webp",
        description: "Essencial para o noivo montar, consertar e cuidar da nossa casa.",
        quantity: 1,
        maxQuantity: 1
    },

    // ======================
    // 8. Contribuições
    // ======================
    {
        id: 30,
        name: "Contribuir em Dinheiro",
        image: "https://fly.metroimg.com/upload/q_85,w_700/https://uploads.metroimg.com/wp-content/uploads/2021/05/20131637/Dinheiro-4.jpg",
        description: "Uma forma flexível de nos ajudar a realizar sonhos e projetos futuros.",
        quantity: 200,
        maxQuantity: 200
    }
];


        let currentProduct = null;

        // Renderizar produtos na grid
        function renderProducts() {
            console.log('Renderizando produtos...');
            const grid = document.getElementById('productGrid');
            
            if (!grid) {
                console.error('Elemento productGrid não encontrado!');
                return;
            }
            
            grid.innerHTML = '';

            products.forEach(product => {
                const card = document.createElement('div');
                card.className = `card ${product.quantity === 0 ? 'unavailable' : ''}`;
                
                let quantityClass = '';
                if (product.quantity === 0) {
                    quantityClass = 'out';
                } else if (product.quantity <= product.maxQuantity * 0.3) {
                    quantityClass = 'low';
                }

                card.innerHTML = `
                    <div class="quantity-badge ${quantityClass}">
                        ${product.quantity} disponíveis
                    </div>
                    <img src="${product.image}" alt="${product.name}">
                    <div class="card-content">
                        <h2>${product.name}</h2>
                        <button class="buy-btn" onclick="openProductModal(${product.id})" 
                                ${product.quantity === 0 ? 'disabled' : ''}>
                            ${product.quantity === 0 ? 'Indisponível' : 'Darei esse presemte!'}
                        </button>
                    </div>
                `;

                grid.appendChild(card);
            });
            
            console.log(`${products.length} produtos renderizados com sucesso!`);
        }

        // Mostrar mensagem
        function showMessage(message, type = 'success') {
            const container = document.getElementById('messageContainer');
            container.innerHTML = `<div class="${type}-message">${message}</div>`;
            setTimeout(() => {
                container.innerHTML = '';
            }, 8000);
        }

        // Abrir modal do produto
        function openProductModal(productId) {
            console.log('Abrindo modal para produto:', productId);
            currentProduct = products.find(p => p.id === productId);
            if (!currentProduct || currentProduct.quantity === 0) return;

            const modal = document.getElementById('productModal');
            const modalImage = document.getElementById('modalImage');
            const modalTitle = document.getElementById('modalTitle');
            const modalDescription = document.getElementById('modalDescription');
            const modalQuantity = document.getElementById('modalQuantity');
            const giftButton = document.getElementById('giftButton');
            const giftQuantity = document.getElementById('giftQuantity');

            modalImage.src = currentProduct.image;
            modalTitle.textContent = currentProduct.name;
            modalDescription.textContent = currentProduct.description;
            modalQuantity.textContent = currentProduct.quantity;

            // Limpar e popular opções de quantidade
            giftQuantity.innerHTML = '<option value="">Selecione...</option>';
            for (let i = 1; i <= Math.min(currentProduct.quantity, 5); i++) {
                giftQuantity.innerHTML += `<option value="${i}">${i} unidade${i > 1 ? 's' : ''}</option>`;
            }

            // Verificar disponibilidade
            if (currentProduct.quantity === 0) {
                giftButton.disabled = true;
                giftButton.textContent = 'Indisponível';
            } else {
                giftButton.disabled = false;
                giftButton.textContent = 'Darei esse presente!';
            }

            modal.style.display = 'block';
        }

        // Fechar modal
        function closeModal() {
            document.getElementById('productModal').style.display = 'none';
            hideContributionForm();
            hideGiftForm();
        }

        // Mostrar formulário de contribuição
        function showContributionForm() {
            document.getElementById('contributionForm').style.display = 'block';
            document.querySelector('.compra-opcoes').style.display = 'none';
        }

        // Esconder formulário de contribuição
        function hideContributionForm() {
            document.getElementById('contributionForm').style.display = 'none';
            document.querySelector('.compra-opcoes').style.display = 'flex';
        }

        // Mostrar formulário de presente
        function showGiftForm() {
            document.getElementById('giftForm').style.display = 'block';
            document.querySelector('.compra-opcoes').style.display = 'none';
        }

        // Esconder formulário de presente
        function hideGiftForm() {
            document.getElementById('giftForm').style.display = 'none';
            document.querySelector('.compra-opcoes').style.display = 'flex';
        }

        // Submeter formulário de presente (versão simples sem email)
        document.getElementById('giftSubmissionForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const quantity = document.getElementById('giftQuantity').value;
    const name = document.getElementById('giftName').value;
    const email = document.getElementById('giftEmail').value;
    const submitButton = e.target.querySelector('.submit-btn');

    if (!quantity || !name || !email) {
        showMessage('Por favor, preencha todos os campos obrigatórios.', 'error');
        return;
    }

    if (quantity > currentProduct.quantity) {
        showMessage('Quantidade solicitada maior que a disponível.', 'error');
        return;
    }

    submitButton.disabled = true;
    submitButton.innerHTML = '<span class="loading"></span>Processando...';

    // 1️⃣ Enviar e-mail de confirmação para você
    emailjs.send("service_r6e5jjm", "template_f8n76wr", {
        product_name: currentProduct.name,
        quantity: quantity,
        from_name: name,
        from_email: email,
        message: new Date().toLocaleString()
    }).then(function(response) {
        console.log('Confirmação enviada!', response);

        // 2️⃣ Enviar e-mail de agradecimento para o doador
        return emailjs.send("service_r6e5jjm", "template_6uls97f", {
            from_name: name,
            product_name: currentProduct.name,
            to_email: email
        });
    }).then(function(response2) {
        console.log('Agradecimento enviado!', response2);

        currentProduct.quantity -= parseInt(quantity);
        renderProducts();

        showMessage(`Obrigado, ${name}! Ficamos honrados com sua generosidade.`, 'success');

        setTimeout(closeModal, 4000);

        submitButton.disabled = false;
        submitButton.textContent = 'Confirmar Presente';
        document.getElementById('giftSubmissionForm').reset();
    }).catch(function(error) {
        console.error('Erro ao enviar e-mail:', error);
        showMessage('⚠️ Ocorreu um erro ao enviar o e-mail. Tente novamente.', 'error');
        submitButton.disabled = false;
        submitButton.textContent = 'Confirmar Presente';
    });
});

        // Fechar modal ao clicar fora
        window.onclick = function(event) {
            const modal = document.getElementById('productModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // Inicializar página
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM carregado!');
            renderProducts();
            
        });

        // Também tentar renderizar imediatamente (caso o DOM já esteja pronto)
        if (document.readyState === 'loading') {
            console.log('Aguardando DOM...');
        } else {
            console.log('DOM já pronto, renderizando...');
            renderProducts();
        }

    </script>
</body>
</html>